<div class="form-group">
    <label>{{ 'asset.type' | translate }}</label>
    <select
            class="form-control"
            [(ngModel)]="selectedAssetType"
            (change)="onAssetTypeChange($any($event.target).value)"
    >
        @for (assetType of assetTypeOptions; track assetType) {
            <option [value]="assetType">
                {{ 'asset.' + assetType.toLowerCase() | translate }}
            </option>
        }
    </select>
</div>

<label>{{ 'common.asset' | translate }}</label>

<div class="form-control">
    <app-loading-spinner [isLoading]="isLoading"></app-loading-spinner>

    @if (!isLoading) {
        <div class="asset-list">

            <!-- Custom Asset Selection -->
            @if (selectedAssetType === AssetType.CUSTOM) {
                <div class="search-header">
                    <input
                            [(ngModel)]="customAssetName"
                            (input)="onCustomAssetInput()"
                            placeholder="{{ 'asset.custom.placeholder' | translate }}"
                            class="native-input"
                    />
                </div>
            } @else {
            <!-- Asset Selection (for non-custom types) -->
            @if (!selectedAsset) {
                <div class="search-header">
                    <input
                            [(ngModel)]="searchTerm"
                            placeholder="{{ 'asset.search.asset' | translate }} {{ _assets.length }}"
                            class="native-input"
                    />
                </div>

                <div>
                    @for (asset of _assets | filterByName: searchTerm; track asset) {
                        <div
                                class="asset-item"
                                (click)="onAssetSelect(asset)"
                        >
                <span class="symbol">
                  {{ asset.symbol ? '(' + asset.symbol + ')' : '' }}
                </span>
                            {{ asset.name }}
                        </div>
                    }
                </div>
            }
        }

            <!-- Selected asset (non-custom) -->
            @if (selectedAsset && selectedAssetType !== AssetType.CUSTOM) {
                <div class="selected-asset">
                    <div class="native-input d-flex align-items-center gap-3">
            <span>
              {{ selectedAsset.symbol ? '(' + selectedAsset.symbol + ')' : '' }}
                {{ selectedAsset.name }}
            </span>
                        <div class="ms-auto">
                            <button
                                    class="btn btn-outline-warning"
                                    (click)="resetPickedAsset()"
                            >
                                {{ 'common.change' | translate }}
                            </button>
                        </div>
                    </div>
                </div>
            }
        </div>
    }
</div>
